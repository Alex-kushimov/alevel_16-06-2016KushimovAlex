!function(e){var t=e.ifac||{};t.id="ifac",t.raw_base="ifac.jsfiddle.net",t.base="//ifac.jsfiddle.net/",t.window=e,t.document=e.document,t.host=t.window.location.protocol+"//"+t.window.location.host,t.head=t.document.head,t.protected=!1,t.impressions={},t.init=function(){console.info(t.id+" initialized!"),t.fetch_attributes(function(){t.protected&&(t.observe_init(t.window),t.observe(t.document.head,t.network),t.observe(t.document.body,t.network)),t.network?t.observer_element(t.document,t.document,t.network):t.networks_activate()})},t.networks=[{id:"5",enabled:!0,entry_js:e._carbonads,entry_url:{query:"#_carbonads_js"},entry_css:{query:"#_carbonads_js",container:t.id+"_5_c",container_flush:"#carbonads",parent:!0,duplicates:new RegExp(t.id+"_5_[0-9]")},tester_url:/(carbonads)|(fusionads)/gi}],t.networks_activate=function(){t.networks.forEach(function(e){t.protected||(e.enabled=!1),e.enabled&&(t.window[t.id+"_"+e.id]=e.entry_js,t.network_init(e)),t.network_script(e),t.network||t.status("p",e.id)})},t.network_script=function(e){var r=t.script();if(e.entry_url.query){var n=document.querySelector(e.entry_css.query).parentNode.querySelector("[hidden]");if(!e.enabled||e.entry_js&&!n)return;if(t.protected=!0,n){var i=document.querySelector(e.entry_css.container_flush);i&&i.remove()}var a=t.document.querySelector(e.entry_url.query);if(!a)return t.network_fallback(e);var o=a.src||a.attributes["data-rocketsrc"].value;r.src=t.url(o,!0,e.id)+"&script=true&"+o.split("?")[1],r.id=t.id+"_"+e.id+"_js",a.parentNode.replaceChild(r,a)}else e.enabled?r.src=t.url(e.entry_url.url,!1,e.id):r.src=atob(e.entry_url.url),t.head.appendChild(r)},t.network_fallback=function(r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=document.createElement("html"),i=t.script();e.innerHTML=n.responseText;var a=e.querySelector(r.entry_url.query);r.entry_css.parent=!1,r.entry_css.query="#"+a.parentNode.id+t.to_array(a.parentNode.classList).join("."),t.network_init(r);var o=t.document.querySelector("."+r.entry_css.container);i.src=t.url(a.src,!0,r.id)+"&script=true&"+a.src.split("?")[1],i.id=t.id+"_"+r.id+"_js",o.appendChild(i)}},n.open("GET",e.location.href,!0),n.send(null)},t.network_init=function(e){var r=t.document.querySelectorAll(e.entry_css.query),n=t.to_array(r);n.forEach(function(r){e.entry_css.parent&&(r=r.parentNode);var n=t.network_duplicates_check(r,e),i=document.createElement("span");if(i.innerHTML+="&nbsp;",r.appendChild(i),r.offsetHeight>0)return i.remove(),t.observe(r,e.id,n);i.remove();var a=r.cloneNode(!0);a.id="",a.className=e.entry_css.container,a.removeAttribute("hidden"),a.style.display="",n=t.network_duplicates_check(a,e),t.observe(a,e.id,n),r.parentNode.replaceChild(a,r)})},t.network_duplicates_check=function(e,t){return function(r,n){return r.parentNode==e&&t.entry_css.duplicates.test(r.id)?r.remove():void n()}},t.fetch_network=function(e){if(!e)return null;for(var r=0;r<t.networks.length;r++){var n=t.networks[r];if(n.enabled&&n.tester_url.test(e))return n.id}return null},t.script=function(){var e=document.createElement("script");return e.setAttribute("data-cfasync","false"),e.setAttribute("type","text/javascript"),e.async=!0,e},t.blocker_check=function(e,r){var n=document.createElement("div");n.innerHTML="&nbsp;",n.className="adsbox",e.document.body.appendChild(n),e.setTimeout(function(){t.protected=0==n.offsetHeight,r&&r(t.protected),n.remove()},100)},t.cleaner=function(e,r){var n=t.script(),i=r.replace(/<script(.*?)>([\s\S]*?)<\/script>/gi,function(){return arguments[1].indexOf("src")>-1?arguments[0]:(n.text+=arguments[2]+";","")});return[i,n]},t.tag_name=function(e){return(e.tagName||"").toLowerCase()},t.to_array=function(e){return Array().slice.call(e||[])},t.url_params="",t.url_attributes={battery:{},demensions:{},plugins:[],languages:[],components:[],do_not_track:!1,r:""},t.status=function(e,r){var n=document.createElement("img");n.src=t.url(e,!1,r,!0),n.m_handled=!0,n.style.display="none",document.body.appendChild(n),n.onload=function(){n.remove()}},t.url=function(e,r,n,i,a){var o=1==i?t.url_params:"";return 0!=r&&(a=a||t.url_type(e),"path"==a&&(e=t.url_append(e)),e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")),t.base+e+"?"+o+(n?"&network="+n:"")+(n?"&protected="+t.protected:"")+"&"},t.url_append=function(r){var n=atob(e.location.pathname.slice(1)).split("?")[0];if("/"==r[0])n="//"+t.extract_domain(n);else{var i=n.split("/"),a=i.length-(r.match(/\.\.\//g)||[]).length;n=n.split("/").slice(0,a).join("/")}return n+"/"+r.replace(/(\.)?\.\//g,"")},t.extract_domain=function(e){var t=e;return e.indexOf("//")>-1&&(t=e.split("//")[1]),t.split("/")[0].split("?")[0]},t.url_type=function(e){return e&&0!=e.length&&t.extract_domain(e)!=t.raw_base?e.indexOf("//")>-1?"external":e.indexOf(":")==-1?"path":null:null},t.url_serialize=function(e,r){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var a=r?r+"["+i+"]":i,o=e[i];n.push("object"==typeof o?t.url_serialize(o,a):encodeURIComponent(a)+"="+encodeURIComponent(o))}return n.join("&")},t.fetch_attributes=function(e){var r=Object.keys(t.url_attributes);t.blocker_check(t.window),r.forEach(function(n,i){switch(n){case"battery":if(!t.window.navigator.getBattery)break;t.window.navigator.getBattery().then(function(e){t.url_attributes[n]={charging:e.charging,charging_time:e.chargingTime,level:e.level}});break;case"demensions":t.url_attributes[n]={width:t.window.innerWidth,height:t.window.innerHeight};break;case"plugins":t.url_attributes[n]=Object.keys(t.window.navigator.plugins||[]).map(function(e){var t=navigator.plugins[e];return{filename:t.filename,description:t.description,name:t.name}});break;case"languages":t.url_attributes[n]=t.window.navigator.languages||[];break;case"components":if(!t.window.navigator.mediaDevices)break;t.window.navigator.mediaDevices.enumerateDevices().then(function(e){t.url_attributes[n]=e.map(function(e){return{device_id:e.deviceId,group_id:e.groupId,kind:e.kind,label:e.label}})});break;case"do_not_track":t.url_attributes[n]="1"==t.window.navigator.doNotTrack}i==r.length-1&&setTimeout(function(){t.url_params=t.url_serialize(t.url_attributes),e()},500)})},t.observers={},t.observe=function(e,r,n){e=e.isProxyNode?e.proxiedNode:e;var i=t.observers[r]||t.observer(e,r,n);t.observers[r]=i,i.observe(e,{attributes:!0,childList:!0,subtree:!!r})},t.observe_init=function(e){e.Document.prototype.m_handled=!1,e.Element.prototype.m_handled=!1},t.observer=function(e,r,n){return new MutationObserver(function(i){i.forEach(function(i){t.to_array(i.addedNodes).forEach(function(i){return n?n(i,function(){t.observer_element(i,e,r)}):void t.observer_element(i,e,r)})})})},t.observer_iframe=function(e,r){t.url_type(e.src)||(t.observe_init(e.contentWindow),t.observe(e.contentDocument,r),t.observer_element(e.contentDocument,e,r,!1),e.addEventListener("load",function(){t.observer_iframe(e,r)}))},t.observer_element=function(e,r,n,i){e.m_handled||("iframe"==t.tag_name(e)?1!=i&&t.observer_iframe(e,n):e.m_handled=!0,t.migrator(e,r,n),t.to_array(e.children).forEach(function(r){t.observer_element(r,e,n)}))},t.migrator=function(e,r,n){var i=e.attributes||{},a=e.src?"src":"href",o=(i[a]||{}).value||e[a],n=n||t.fetch_network(o),c=t.tag_name(e),s=t.url_type(o),u=!1;if(!n||!s)return e;var d=e,l=t.url(o,!0,n,!1,s);return"a"==c&&(l+="&link=true",t.impressions[r]||(t.status("i",n),t.impressions[r]=!0)),"iframe"==c&&(l+="&frame="+encodeURI(t.raw_base)),"script"==c&&(e=t.script(),e.type=d.type,e.id=d.id,u=!0,l+="&=script=true"),"link"==c&&(e=e.cloneNode(!1),u=!0),e[a]=l,u&&(d.parentNode?d.parentNode.replaceChild(e,d):(r.appendChild(e),d.remove())),e},t.init()}(window);